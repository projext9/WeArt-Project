<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace = "we.are.travelers.member">

     <select id="checkId" parameterType="string" resultType="int">  
		SELECT a.member_id,b.company_id
		FROM (SELECT COUNT(*) member_id FROM weart_member where member_id=#{member_id}) a ,
		     (SELECT COUNT(*) company_id FROM weart_company where company_id=#{company_id}) b
	</select> 
	
	<select id="checkNick" parameterType="string" resultType="int">  
	    select count(*) from weart_member where member_nick=#{member_nick}
	</select>
     
	<insert id="joinMember" parameterType="memberVo">
		insert into weart_member(member_idx,member_id,member_pwd,member_name, member_nick, member_birth)
		
		 values(#{member_idx}, #{member_id}, #{member_pwd}, #{member_name}, #{member_nick}, #{member_birth})
	</insert>
	
	<select id="loginMember" parameterType="memberVo" resultType="memberVo">
		select * from weart_member where member_id=#{member_id} and member_pwd=#{member_pwd} and member_delyn='N'
	</select>
	
	<select id="loginMemberDelynS" parameterType="memberVo" resultType="memberVo">
		select * from weart_member where member_id=#{member_id} and member_pwd=#{member_pwd} and member_delyn='S'
	</select>
	
	<select id="findKakao" parameterType="java.util.HashMap" resultType="memberVo">
		select social_kakao, member_nick from weart_member where social_kakao=#{social_kakao} and member_nick=#{member_nick}
	</select>
	
	<insert id="insertKakao" parameterType="java.util.HashMap">
		insert into weart_member(member_idx, social_kakao, member_nick, member_regCode)
		
		 values(#{member_idx}, #{social_kakao}, #{member_nick}, #{member_regCode})
	</insert>
	
	<select id="findNaver" parameterType="java.util.HashMap" resultType="memberVo">
		select social_naver, member_nick from weart_member where social_naver=#{social_naver} and member_nick=#{member_nick}
	</select>
	
	<insert id="insertNaver" parameterType="java.util.HashMap">
		insert into weart_member(member_idx, social_naver, member_nick, member_regCode)
		
		 values(#{member_idx}, #{social_naver}, #{member_nick}, #{member_regCode})
	</insert>
	

	


</mapper>
